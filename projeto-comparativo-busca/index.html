<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Comparativo de Buscas - Web</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 50px; background-color: #f4f4f9; color: #333; }
        .container { max-width: 900px; margin: auto; padding: 30px; background: white; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        h1 { color: #007bff; text-align: center; margin-bottom: 20px; }
        p.info { text-align: center; color: #555; }
        table { width: 100%; border-collapse: collapse; margin-top: 25px; }
        th, td { padding: 15px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background-color: #007bff; color: white; font-weight: 600; }
        tr:nth-child(even) { background-color: #f8f8f8; }
        button { background-color: #28a745; color: white; border: none; padding: 12px 25px; border-radius: 5px; cursor: pointer; font-size: 16px; transition: background-color 0.3s; display: block; margin: 20px auto; }
        button:hover { background-color: #218838; }
        .loading { text-align: center; margin-top: 20px; font-weight: bold; color: #ffc107; }
        .error { text-align: center; margin-top: 20px; font-weight: bold; color: #dc3545; }
        .tempo-hash { color: #28a745; font-weight: bold; } /* Verde */
        .tempo-seq { color: #dc3545; } /* Vermelho */
        .tempo-index { color: #ffc107; } /* Amarelo */
    </style>
</head>
<body>
    <div class="container">
        <h1>游댌 Compara칞칚o de Algoritmos de Busca</h1>
        <p class="info">Base de Dados: 5500+ Registros em H2 Database (Spring Boot).</p>
        <button onclick="executarBusca()">Gerar Nova Busca e Comparar Tempos</button>
        
        <p id="status" class="loading">Clique no bot칚o para iniciar a primeira busca...</p>
        
        <table id="resultadosTable">
            <thead>
                <tr>
                    <th>Tipo de Pesquisa</th>
                    <th>Chave Aleat칩ria Usada</th>
                    <th>Tempo Gasto</th>
                </tr>
            </thead>
            <tbody>
                </tbody>
        </table>
    </div>

    <script>
        // 丘멆잺 SUBSTITUA ESTA URL PELA SUA URL P칔BLICA DO BACKEND JAVA
        // Exemplo: 'https://seu-projeto-final-xxxxxx.up.railway.app/api/comparar-buscas'
        const API_URL = 'http://localhost:8080/api/comparar-buscas';
        
        const tabelaBody = document.querySelector('#resultadosTable tbody');
        const statusElement = document.getElementById('status');

        function formatarLinha(resultado) {
            let className = '';
            if (resultado.tipo.includes('HashMap')) {
                className = 'tempo-hash';
            } else if (resultado.tipo.includes('Sequencial')) {
                className = 'tempo-seq';
            } else if (resultado.tipo.includes('Indexada')) {
                className = 'tempo-index';
            }
            
            return `
                <tr>
                    <td><strong>${resultado.tipo}</strong></td>
                    <td>${resultado.chave}</td>
                    <td class="${className}">${resultado.tempo}</td>
                </tr>
            `;
        }

        async function executarBusca() {
            statusElement.textContent = 'Executando buscas no Backend Java... Aguarde...';
            statusElement.classList.remove('error');
            tabelaBody.innerHTML = ''; 

            try {
                const response = await fetch(API_URL);
                if (!response.ok) {
                    throw new Error(`Erro HTTP! Status: ${response.status}. Verifique se o Backend est치 online.`);
                }
                const resultados = await response.json();
                
                let htmlContent = '';
                resultados.forEach(res => {
                    htmlContent += formatarLinha(res);
                });
                
                tabelaBody.innerHTML = htmlContent;
                statusElement.textContent = 'Busca conclu칤da com sucesso!';
                
            } catch (error) {
                console.error("Erro ao buscar dados:", error);
                statusElement.textContent = `ERRO: ${error.message}`;
                statusElement.classList.add('error');
            }
        }
        
        // Executa a busca ao carregar a p치gina (ap칩s 1 segundo para dar tempo do status aparecer)
        setTimeout(executarBusca, 1000);
    </script>
</body>
</html>